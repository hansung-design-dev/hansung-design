# 고객용 디버깅 안내 (결제 오류 진단)

결제 과정에서 문제가 발생하는 경우, 아래 단계를 따라 개발자 도구 콘솔 화면을 캡처해서 보내주시면 빠르게 문제를 해결할 수 있습니다.

## 📋 캡처 방법

### 1단계: 개발자 도구 열기

1. 결제 페이지에서 **F12 키**를 누르거나
2. 마우스 우클릭 → **"검사"** 또는 **"개발자 도구"** 클릭
3. 또는 **Ctrl + Shift + I** (윈도우) / **Cmd + Option + I** (맥)

### 2단계: Console 탭 선택

개발자 도구가 열리면 상단의 **"Console"** 탭을 클릭하세요.

### 3단계: 페이지 새로고침

**F5 키**를 누르거나 새로고침 버튼을 클릭하여 페이지를 새로고침하세요.

### 4단계: 결제 시도

1. 결제하기 버튼을 클릭하세요
2. 모달이 뜨는지, 위젯이 나타나는지 확인하세요
3. 에러가 발생하면 그 시점에서 멈추세요

### 5단계: 콘솔 캡처

1. Console 탭에서 **모든 로그**가 보이도록 스크롤을 위로 올리세요
2. **전체 화면 캡처** 또는 **스크롤 캡처**를 해주세요
   - 윈도우: **Win + Shift + S** (스크린샷 도구)
   - 맥: **Cmd + Shift + 4** (영역 선택)
3. 특히 **빨간색 에러 메시지**가 있다면 반드시 포함해주세요

### 6단계: 추가 정보 캡처

다음 정보도 함께 캡처해주시면 더 빠르게 진단할 수 있습니다:

#### Network 탭
1. 개발자 도구에서 **"Network"** 탭 클릭
2. 페이지 새로고침 후 결제 시도
3. 빨간색으로 표시된 실패한 요청이 있는지 확인
4. 캡처

#### Application 탭 (선택사항)
1. 개발자 도구에서 **"Application"** 탭 클릭
2. 왼쪽 메뉴에서 **"Local Storage"** → 사이트 주소 클릭
3. `hansung_cart`, `hansung_profiles_user_id` 등의 키가 있는지 확인
4. 캡처

## 📸 캡처 예시

다음과 같은 로그들이 보여야 합니다:

```
🔍 [결제 페이지 초기화] 브라우저 및 환경 정보: {...}
🔍 [결제 버튼 클릭] Step 1: openTossWidget 함수 호출됨
🔍 [위젯 초기화] Step 1: initializeTossWidget 함수 시작
🔍 [위젯 초기화] Step 2: 상태 값 저장 시작
...
```

**에러가 발생하면** 다음과 같은 빨간색 메시지가 나타납니다:

```
🔍 [위젯 초기화] ❌ Step X: ... 실패
```

## ⚠️ 주의사항

1. **개인정보 보호**: 콘솔에 개인정보(이름, 이메일, 전화번호 등)가 포함될 수 있습니다. 
   - 캡처 전에 민감한 정보는 가려주시거나
   - 개발팀에 전달 시 개인정보 보호에 주의해주세요

2. **전체 로그**: 가능하면 **모든 로그**를 포함해주세요 (🔍로 시작하는 모든 메시지)

3. **에러 발생 시점**: 에러가 발생한 정확한 시점의 로그가 가장 중요합니다

## 📧 전달 방법

캡처한 이미지를 다음 정보와 함께 보내주세요:

1. **브라우저 정보**
   - 브라우저 종류 (Chrome, Edge, Firefox 등)
   - 브라우저 버전 (주소창에 `chrome://version` 입력하면 확인 가능)

2. **OS 정보**
   - 운영체제 (Windows 10, Windows 11, Mac 등)
   - OS 버전

3. **문제 발생 시점**
   - 결제 버튼 클릭 후 모달이 뜨기 전인지
   - 모달은 뜨는데 위젯이 안 뜨는지
   - 위젯은 뜨는데 결제 진행이 안 되는지

4. **에러 메시지** (화면에 표시된 에러가 있다면)

## 🔍 자주 발생하는 문제

### 문제 1: "토스페이먼츠 클라이언트 키가 설정되지 않았습니다"
- **원인**: 환경 변수 설정 문제
- **해결**: 개발팀에 환경 변수 설정 확인 요청

### 문제 2: "localStorage 접근 불가"
- **원인**: 브라우저 보안 설정 또는 시크릿 모드
- **해결**: 일반 모드에서 시도하거나 브라우저 설정 확인

### 문제 3: "SDK import 실패" 또는 "loadTossPayments 실패"
- **원인**: 네트워크 문제, CORS 문제, 또는 브라우저 확장 프로그램 간섭
- **해결**: 네트워크 연결 확인, 확장 프로그램 비활성화 후 재시도

## 💡 빠른 체크리스트

캡처 전에 다음을 확인해주세요:

- [ ] 개발자 도구가 열려있는가?
- [ ] Console 탭이 선택되어 있는가?
- [ ] 페이지를 새로고침했는가?
- [ ] 결제 버튼을 클릭했는가?
- [ ] 에러 메시지가 있는가?
- [ ] 🔍로 시작하는 로그들이 보이는가?

---

**문의사항이 있으시면 개발팀에 연락해주세요.**

